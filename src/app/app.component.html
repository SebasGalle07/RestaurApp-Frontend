<ng-container *ngIf="authService.isAuthenticated(); else guestShell">
  <div class="app-shell">
    <header class="topbar">
      <div class="brand">
        <div class="brand-mark">Ψφ</div>
        <div class="brand-meta">
          <span class="brand-name">RestaurantePOS</span>
          <small>Sistema de pedidos</small>
        </div>
      </div>

      <nav class="nav">
        <a *ngFor="let link of protectedLinks"
           [routerLink]="link.path"
           routerLinkActive="active">
          <span>{{ link.label }}</span>
        </a>
      </nav>

      <div class="profile">
        <div class="profile__meta">
          <small>{{ currentRoleLabel }}</small>
          <strong>{{ userDisplayName | titlecase }}</strong>
        </div>
        <div class="profile__avatar">{{ userInitials }}</div>
        <button type="button" class="profile__logout" (click)="logout()">Cerrar sesión</button>
      </div>
    </header>

    <main class="app-main">
      <router-outlet />
    </main>
  </div>
</ng-container>

<ng-template #guestShell>
  <div class="guest-wrapper">
    <router-outlet />
  </div>
</ng-template>
